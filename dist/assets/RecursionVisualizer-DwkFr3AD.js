import{r as o,j as e}from"./index-CXjysMFq.js";const y=({animationState:s,selectedAlgorithm:l,inputValue:a})=>{console.log("RecursionVisualizer render:",{selectedAlgorithm:l,inputValue:a,isRunning:s.isRunning,currentStep:s.currentStep,callStack:s.callStack});const[m,p]=o.useState(!1),n=s.currentStepData||{},h=o.useMemo(()=>{if(l!=="factorial"||(s.steps||[]).filter(i=>i.type==="return").map(i=>i.result).length===0)return null;const c=parseInt(a);return isNaN(c)?null:Array.from({length:c},(i,d)=>c-d).join(" × ")},[s.steps,l,a]),x=o.useMemo(()=>l!=="fibonacci"?null:n.memoSnapshot||null,[n,l]),b=o.useMemo(()=>l!=="tower-hanoi"?[]:(s.steps||[]).filter(r=>r.type==="move").slice(-10),[s.steps,l]),u=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"📚 Call Stack"}),e.jsx("div",{className:"space-y-2",children:(s.callStack||[]).map((r,t)=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${t===(s.callStack?.length||0)-1?"bg-gradient-to-r from-yellow-500/20 to-amber-500/20 border-yellow-400":"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border-blue-400"}`,children:e.jsxs("div",{className:"text-white font-mono",children:["factorial(",r.n!==void 0?r.n:r.value,") ",r.result!==void 0&&`= ${r.result}`]})},t))})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"🧮 Formula"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"text-2xl text-cyan-400 font-mono",children:"n! = n × (n-1)!"}),e.jsx("div",{className:"text-gray-300",children:"Base case: 0! = 1, 1! = 1"}),a&&e.jsxs("div",{className:"text-yellow-400 font-bold text-xl",children:[a,"! = ",s.finalResult||"?"]}),h&&e.jsxs("div",{className:"text-sm text-purple-300 font-mono mt-2",children:[a,"! expansion: ",h]})]})]})]}),g=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"🌳 Recursion Tree"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-300 mb-4",children:"Each fib(n) branches into fib(n-1) + fib(n-2)"}),s.fibTree&&e.jsxs("div",{className:"font-mono text-sm text-cyan-400",children:[e.jsxs("div",{children:["fib(",a,")"]}),e.jsxs("div",{className:"ml-4",children:["├── fib(",a-1,")"]}),e.jsxs("div",{className:"ml-4",children:["└── fib(",a-2,")"]})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"📚 Active Calls"}),e.jsx("div",{className:"space-y-2",children:(s.callStack||[]).map((r,t)=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${t===(s.callStack?.length||0)-1?"bg-gradient-to-r from-yellow-500/20 to-amber-500/20 border-yellow-400":"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border-green-400"}`,children:e.jsxs("div",{className:"text-white font-mono",children:["fib(",r.n!==void 0?r.n:r.value,") ",r.result!==void 0&&`= ${r.result}`]})},t))})]}),x&&e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"🗂️ Memo Cache"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 text-xs font-mono",children:Object.keys(x).sort((r,t)=>parseInt(r)-parseInt(t)).map(r=>e.jsxs("div",{className:"bg-slate-700/60 rounded p-2 text-cyan-300 border border-slate-500/50",children:["fib(",r,") = ",x[r]]},r))})]})]}),f=()=>{const r=parseInt(a)||3;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"🗼 Tower of Hanoi"}),e.jsx("div",{className:"flex justify-around items-end h-64",children:["A","B","C"].map((t,c)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"text-white font-bold mb-2",children:["Rod ",t]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-2 h-48 bg-gradient-to-t from-gray-600 to-gray-400 rounded-t-lg"}),e.jsx("div",{className:"w-24 h-4 bg-gradient-to-r from-gray-700 to-gray-500 rounded-lg -translate-x-11 translate-y-1"}),(Array.isArray(s.towers)?s.towers:[s.towers.A||[],s.towers.B||[],s.towers.C||[]])[c]?.map((i,d)=>e.jsx("div",{className:"absolute bg-gradient-to-r from-blue-500 to-cyan-400 rounded-lg h-6 border-2 border-white/20 flex items-center justify-center text-white font-bold text-sm",style:{width:`${i*8+32}px`,left:`${-(i*4+12)}px`,bottom:`${d*28+16}px`},children:i},d))]})]},t))})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-gray-600",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"📊 Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:s.moveCount||0}),e.jsx("div",{className:"text-gray-300",children:"Moves Made"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:Math.pow(2,r)-1}),e.jsx("div",{className:"text-gray-300",children:"Minimum Moves"})]})]}),b.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Recent Moves"}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-auto pr-2 text-xs font-mono",children:b.map((t,c)=>e.jsxs("div",{className:"flex items-center gap-2 bg-slate-700/40 px-2 py-1 rounded border border-slate-600/40",children:[e.jsxs("span",{className:"text-cyan-300",children:["#",t.moveCount]}),e.jsxs("span",{className:"text-white",children:["disk ",t.move.disk]}),e.jsxs("span",{className:"text-purple-300",children:[t.move.from," → ",t.move.to]})]},c))})]})]})]})},j=()=>{switch(l){case"factorial":return u();case"fibonacci":return g();case"tower-hanoi":return f();default:return e.jsx("div",{className:"text-center text-gray-400 py-12",children:"Select a recursion algorithm to see visualization"})}};return e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-gray-800 rounded-2xl p-8 border border-gray-700 shadow-2xl",children:[e.jsx("div",{className:"mb-6 text-center",children:e.jsx("div",{className:"inline-flex items-center justify-center bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full font-bold text-lg shadow-lg",children:"🔄 Recursion Visualization"})}),j(),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200 shadow-sm mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Step: ",s.currentStep+1," / ",s.steps.length||0]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.isRunning?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:s.isRunning?"Computing":"Ready"})]}),e.jsx("div",{className:"text-sm text-purple-800 font-medium",children:s.highlight||'Enter a number and click "Run Algorithm" to start recursion visualization'}),n.description&&e.jsx("div",{className:"text-xs text-gray-600 bg-purple-50 border border-purple-200 rounded p-2 leading-relaxed",children:n.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 pt-1",children:[n.type&&e.jsx("span",{className:"text-[10px] uppercase tracking-wide bg-slate-800 text-white px-2 py-1 rounded",children:n.type}),n.result!==void 0&&e.jsxs("span",{className:"text-[10px] bg-emerald-100 text-emerald-700 px-2 py-1 rounded",children:["result: ",n.result]}),n.finalResult!==void 0&&e.jsxs("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-2 py-1 rounded",children:["final: ",n.finalResult]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("button",{onClick:()=>p(r=>!r),className:"text-xs font-semibold text-white bg-indigo-600 hover:bg-indigo-700 px-3 py-2 rounded shadow inline-flex items-center gap-2",children:m?"Hide Explanation":"Show Explanation"}),m&&e.jsxs("div",{className:"mt-4 text-left space-y-4 text-sm text-gray-200 bg-slate-800/70 p-4 rounded-lg border border-slate-600",children:[e.jsx("p",{className:"font-semibold text-white",children:"How this visualization works:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-purple-300 font-medium",children:"Call Stack"}),": Shows active recursive frames (top = most recent call)."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-purple-300 font-medium",children:"Step Types"}),": call, base-case, return, recursive-call, move, memoized, complete."]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-purple-300 font-medium",children:"Description Box"}),": Human explanation of what the current step is doing."]}),l==="factorial"&&e.jsx("li",{children:"Factorial expands downward until base case, then multiplies results while unwinding."}),l==="fibonacci"&&e.jsx("li",{children:"Fibonacci branches into two subcalls; memoization captures already computed results."}),l==="tower-hanoi"&&e.jsx("li",{children:"Hanoi solves by moving top n-1 to aux, largest to destination, then n-1 onto it."})]})]})]})]})};export{y as default};
